{"version":3,"sources":["styles/DialoguesHeader.module.css","styles/FormInput.module.css","styles/Profile.module.css","styles/DialogueItem.module.css","styles/MessageItem.module.css","styles/MessageForm.module.css","styles/MainForm.module.css","styles/Header.module.css","styles/DialogueForm.module.css","styles/CreateDialogueButton.module.css","utils/serviceWorker.js","components/DialoguesHeader.jsx","components/MyContext.Context.jsx","components/DialogueItem.jsx","components/CreateDialogueButton.jsx","components/DialogueForm.jsx","components/Header.jsx","components/FormInput.jsx","components/MessageItem.jsx","components/MessageForm.jsx","components/Profile.jsx","components/MainForm.jsx","index.js"],"names":["module","exports","Boolean","window","location","hostname","match","DialoguesHeader","className","styles","header","type","id","checkbox4","visuallyHidden","htmlFor","hamburger","hamburger4","bar","bar1","bar2","bar3","bar4","bar5","messenger","searchButton","src","alt","MyContext","React","createContext","DialogueItem","props","chat","formattedTime","Date","lastMessage","time","Consumer","value","dialogue","to","style","textDecoration","avatar","wrapper","color","text","name","title","toLocaleString","hour","minute","info","message","content","status","CreateDialogueButton","createHandler","onClick","createDialogueButton","DialogueForm","chats","dialogues","length","empty","forEach","dialogueItem","push","dialogueList","bind","ChatHeader","details","clickBack","Backbutton","chatInfo","avatarImage","senderInfo","settingsButton","FormInput","input","useRef","messageHandler","dragFiles","setDragFiles","useState","dropOutStyle","setDropOutStyle","attachments","setAttachments","sendButtonType","setSendButtonType","attachmentsBoxStyles","list","img","onSubmit","current","trim","removeFile","i","attachmentsList","splice","draggedAttachments","path","URL","createObjectURL","file","height","map","addition","Attachment","key","remove","container","formInput","dropOut","dropOutContainer","click","attachItem","attachImage","onChange","event","callbackSuccess","callbackError","additionsList","target","files","flag","size","slice","imageUploader","ref","multiple","display","navigator","geolocation","getCurrentPosition","console","log","enableHighAccuracy","maximumAge","timeout","getMyPosition","position","coords","latitude","longitude","response","attachGeo","width","attachButton","onKeyPress","charCode","placeholder","SendButton","submit","additionsBox","additionsBoxUl","addStyle","backgroundRepeat","backgroundSize","backgroundPosition","backgroundImage","image","imageName","inputButton","micButton","sendButton","MessageItem","inner","isAttached","attachmentsToRender","attachment","attachmentItem","messageWrap","messageItem","timestamp","staticMap","href","rel","MessageForm","messages","dragActive","setDragActive","messagesToRender","element","onDrop","preventDefault","stopPropagation","dataTransfer","onDragOver","onDragLeave","messageForm","dragNDropArea","activeZone","dragNDropImage","closeDialogue","messagesList","inputForm","Profile","headerContainer","backButton","submitButton","profile","formContainer","formLabel","MainForm","storage","parseStorage","state","chatCounter","currentDialogue","frameStyles","animationName","chatDisappear","JSON","parse","localStorage","getItem","chatId","this","chatAppearance","setState","frame","Object","keys","index","chatTimestamp","amISender","data","FormData","append","Attr","fetch","method","body","then","catch","setLastMessage","setItem","stringify","prompt","chatMsgs","is_group","host","chatMessages","pathname","test","chatid","parseInt","openDialogue","openProfile","pageRouter","Provider","Component","render","component","document","getElementById","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.5182bedc.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"DialoguesHeader_header__1SGyL\",\"visuallyHidden\":\"DialoguesHeader_visuallyHidden__3POkp\",\"hamburger\":\"DialoguesHeader_hamburger__2WfXv\",\"bar\":\"DialoguesHeader_bar__13LSp\",\"bar1\":\"DialoguesHeader_bar1__fvbKg\",\"bar2\":\"DialoguesHeader_bar2__29tzD\",\"bar3\":\"DialoguesHeader_bar3__2cLbz\",\"bar4\":\"DialoguesHeader_bar4__1zNtJ\",\"hamburger2\":\"DialoguesHeader_hamburger2__2EAWL\",\"hamburger3\":\"DialoguesHeader_hamburger3__2Khek\",\"hamburger4\":\"DialoguesHeader_hamburger4__q8D8x\",\"bar5\":\"DialoguesHeader_bar5__2lNj4\",\"checkbox4\":\"DialoguesHeader_checkbox4__8gdlC\",\"messenger\":\"DialoguesHeader_messenger__36R73\",\"searchButton\":\"DialoguesHeader_searchButton__1bBEn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formInput\":\"FormInput_formInput__1CDjc\",\"attachButton\":\"FormInput_attachButton__2ixoS\",\"sendButton\":\"FormInput_sendButton__22Gjc\",\"micButton\":\"FormInput_micButton__11YK-\",\"cancelButton\":\"FormInput_cancelButton__bJpbb\",\"inputButton\":\"FormInput_inputButton__2UzLN\",\"dropOut\":\"FormInput_dropOut__2fyVW\",\"dropOutContainer\":\"FormInput_dropOutContainer__2ygt-\",\"attachItem\":\"FormInput_attachItem__1vaHt\",\"attachImage\":\"FormInput_attachImage__21_M-\",\"attachGeo\":\"FormInput_attachGeo__1PPvS\",\"additionsBox\":\"FormInput_additionsBox__3dD64\",\"additionsBoxUl\":\"FormInput_additionsBoxUl__1fz_N\",\"image\":\"FormInput_image__J1Lbo\",\"imageName\":\"FormInput_imageName__3ZK77\",\"remove\":\"FormInput_remove__Ij8bW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"wrapper\":\"Profile_wrapper__l1aal\",\"headerContainer\":\"Profile_headerContainer__3OGTq\",\"header\":\"Profile_header__3KTnW\",\"backButton\":\"Profile_backButton__PQK6j\",\"editProfile\":\"Profile_editProfile__2nMoF\",\"submitButton\":\"Profile_submitButton__3ZqAl\",\"profile\":\"Profile_profile__3y5_H\",\"avatar\":\"Profile_avatar__3XqJk\",\"formContainer\":\"Profile_formContainer__3L5Z1\",\"formLabel\":\"Profile_formLabel__26nnp\",\"inputForm\":\"Profile_inputForm__2G2h8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogue\":\"DialogueItem_dialogue__2rBXY\",\"avatar\":\"DialogueItem_avatar__9XARq\",\"wrapper\":\"DialogueItem_wrapper__3lnRQ\",\"text\":\"DialogueItem_text__1WkGt\",\"name\":\"DialogueItem_name__1rMup\",\"time\":\"DialogueItem_time__31wNC\",\"info\":\"DialogueItem_info__WVGza\",\"message\":\"DialogueItem_message__3mEch\",\"status\":\"DialogueItem_status__1zUFk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageWrap\":\"MessageItem_messageWrap__udvmP\",\"inner\":\"MessageItem_inner__18rlh\",\"messageItem\":\"MessageItem_messageItem__3ZnNZ\",\"appearance\":\"MessageItem_appearance__3pxnC\",\"message\":\"MessageItem_message__1157w\",\"timestamp\":\"MessageItem_timestamp__30gC_\",\"attachments\":\"MessageItem_attachments__15Y8W\",\"attachment\":\"MessageItem_attachment__3ze9n\",\"geolocation\":\"MessageItem_geolocation__2Inih\",\"image\":\"MessageItem_image__1mB4Z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageForm\":\"MessageForm_messageForm__8PdEl\",\"messagesList\":\"MessageForm_messagesList__2eLXd\",\"header\":\"MessageForm_header__10-FU\",\"chat\":\"MessageForm_chat__31JWU\",\"inputForm\":\"MessageForm_inputForm__Q4V5O\",\"dragNDropArea\":\"MessageForm_dragNDropArea__3m60l\",\"activeZone\":\"MessageForm_activeZone__3Ogxo\",\"dragNDropImage\":\"MessageForm_dragNDropImage__3N1tB\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"MainForm_container__1Ac2B\",\"chatDisappear\":\"MainForm_chatDisappear__2crCV\",\"chatAppearance\":\"MainForm_chatAppearance__2FfsV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1fnJb\",\"Backbutton\":\"Header_Backbutton__3R9Gt\",\"chatInfo\":\"Header_chatInfo__1j9it\",\"avatarImage\":\"Header_avatarImage__3VzTK\",\"senderInfo\":\"Header_senderInfo__2QORm\",\"settingsButton\":\"Header_settingsButton__2eFvK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogues\":\"DialogueForm_dialogues__1D1Xl\",\"dialogueList\":\"DialogueForm_dialogueList__QR6qv\",\"empty\":\"DialogueForm_empty__ygZ6X\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"createDialogueButton\":\"CreateDialogueButton_createDialogueButton__i92_8\"};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n/* eslint no-console: 0 */\n/* eslint no-param-reassign: 0 */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/),\n)\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA',\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.',\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (response.status === 404 || (contentType != null && contentType.indexOf('javascript') === -1)) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log('No internet connection found. App is running in offline mode.')\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then((registration) => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport styles from '../styles/DialoguesHeader.module.css'\n\nexport function DialoguesHeader() {\n  return (\n    <div className={styles.header}>\n      <input type=\"checkbox\" id=\"checkbox4\" className={styles.checkbox4 + ' ' + styles.visuallyHidden} />\n      <label htmlFor=\"checkbox4\">\n        <div className={styles.hamburger + ' ' + styles.hamburger4}>\n          <span className={styles.bar + ' ' + styles.bar1} />\n          <span className={styles.bar + ' ' + styles.bar2} />\n          <span className={styles.bar + ' ' + styles.bar3} />\n          <span className={styles.bar + ' ' + styles.bar4} />\n          <span className={styles.bar + ' ' + styles.bar5} />\n        </div>\n      </label>\n      <div className={styles.messenger}>Dimanich Messenger</div>\n      <div className={styles.searchButton}>\n        <img\n          className={styles.searchButton}\n          src=\"https://im0-tub-ru.yandex.net/i?id=48aff79a613972e36ec3fe0bb6886909&n=13\"\n          alt=\"Settings Button\"\n        />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\n\nconst MyContext = React.createContext(null)\n\nexport default MyContext\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styles from '../styles/DialogueItem.module.css'\nimport MyContext from './MyContext.Context'\n\nexport function DialogueItem(props) {\n  const { chat } = props\n  const formattedTime = new Date(chat.lastMessage.time)\n  return (\n    <MyContext.Consumer>\n      {(value) => (\n        <div className={styles.dialogue}>\n          <Link to={`/profile/${chat.id}`} style={{ textDecoration: 'none' }}>\n            <img\n              className={styles.avatar}\n              src=\"https://im0-tub-ru.yandex.net/i?id=251924006823dd06b0ce06d758f3e6e2&n=13\"\n              alt=\"avatar\"\n            />\n          </Link>\n          <div className={styles.wrapper}>\n            <Link to={`/chat/${chat.id}`} style={{ textDecoration: 'none', color: 'unset' }}>\n              <div className={styles.text}>\n                <div className={styles.name}>{chat.title}</div>\n                <div className={styles.time}>\n                  {formattedTime.toLocaleString('ru', {\n                    hour: 'numeric',\n                    minute: 'numeric',\n                  })}\n                </div>\n              </div>\n              <div className={styles.info}>\n                <div className={styles.message}>{chat.lastMessage.content || 'Attachment'}</div>\n                <div className={styles.status}>{chat.lastMessage.status}</div>\n              </div>\n            </Link>\n          </div>\n        </div>\n      )}\n    </MyContext.Consumer>\n  )\n}\n","import React from 'react'\nimport styles from '../styles/CreateDialogueButton.module.css'\n\nexport function CreateDialogueButton(props) {\n  const { createHandler } = props\n  return <button onClick={createHandler} className={styles.createDialogueButton} />\n}\n","import React from 'react'\nimport styles from '../styles/DialogueForm.module.css'\nimport { DialoguesHeader } from './DialoguesHeader'\nimport { DialogueItem } from './DialogueItem'\nimport { CreateDialogueButton } from './CreateDialogueButton'\nimport MyContext from './MyContext.Context'\n\nexport function DialogueForm(props) {\n  const { chats } = props\n\n  let dialogues = []\n  if (chats.length === 0) {\n    dialogues = <div className={styles.empty}>No messages yet</div>\n  } else {\n    chats.forEach((chat) => {\n      const dialogueItem = <DialogueItem chat={chat} />\n      dialogues.push(dialogueItem)\n    })\n  }\n\n  return (\n    <div className={styles.dialogues}>\n      <DialoguesHeader />\n      <div className={styles.dialogueList}>{dialogues}</div>\n      <MyContext.Consumer>\n        {(value) => <CreateDialogueButton createHandler={value.createHandler.bind(value)} />}\n      </MyContext.Consumer>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styles from '../styles/Header.module.css'\n\nexport function ChatHeader(props) {\n  const { details, clickBack } = props\n  return (\n    <div className={styles.header}>\n      <Link to=\"/\">\n        <button onClick={clickBack} className={styles.Backbutton}>\n          Back\n        </button>\n      </Link>\n      <div className={styles.chatInfo}>\n        <Link to={`/profile/${details.id}`}>\n          <img\n            className={styles.avatarImage}\n            src=\"https://im0-tub-ru.yandex.net/i?id=251924006823dd06b0ce06d758f3e6e2&n=13\"\n            alt=\"Avatar\"\n          />\n        </Link>\n        <div className={styles.senderInfo}>\n          <div>{details.title}</div>\n          <div>Status: unknown</div>\n        </div>\n      </div>\n      <input\n        type=\"image\"\n        className={styles.settingsButton}\n        src=\"https://im0-tub-ru.yandex.net/i?id=48aff79a613972e36ec3fe0bb6886909&n=13\"\n        alt=\"settings button\"\n      />\n    </div>\n  )\n}\n","import React from 'react'\nimport styles from '../styles/FormInput.module.css'\n\nexport function FormInput(props) {\n  const input = React.useRef(null)\n  const { messageHandler } = props\n  const [dragFiles, setDragFiles] = props.dragFiles\n  const [dropOutStyle, setDropOutStyle] = React.useState(null)\n  const [attachments, setAttachments] = React.useState(null)\n  const [sendButtonType, setSendButtonType] = React.useState('mic')\n  let attachmentsBoxStyles = null\n  let list = null\n  const img = React.useRef(null)\n\n  const onSubmit = () => {\n    const value = input.current.value.trim()\n    if (attachments || value !== '') {\n      input.current.value = ''\n      messageHandler(value, null, null, attachments)\n    }\n    setAttachments(null)\n  }\n\n  const onKeyPress = (event) => {\n    if (event.charCode === 13) {\n      onSubmit()\n    }\n  }\n\n  const removeFile = (i) => {\n    const attachmentsList = attachments.list\n    attachmentsList.splice(i, 1)\n    if (attachmentsList.length) {\n      setAttachments({\n        type: attachments.type,\n        list: attachmentsList,\n      })\n    } else {\n      setAttachments(null)\n    }\n  }\n\n  if (dragFiles) {\n    const draggedAttachments = attachments || {}\n    draggedAttachments.type = 'image'\n    draggedAttachments.list = [\n      {\n        name: dragFiles.name,\n        path: window.URL.createObjectURL(dragFiles),\n        file: dragFiles,\n      },\n    ]\n\n    if (draggedAttachments !== attachments) {\n      setAttachments(draggedAttachments)\n    }\n\n    setDragFiles(null)\n  }\n\n  if ((input.current && input.current.value !== '') || attachments) {\n    if (sendButtonType !== 'send') {\n      setSendButtonType('send')\n    }\n  } else if (sendButtonType !== 'mic') {\n    setSendButtonType('mic')\n  }\n\n  const imageUploader = (event, callbackSuccess, callbackError = null) => {\n    let additionsList = event.target.files\n    if (!additionsList.length) {\n      return false\n    }\n\n    let flag = false\n    additionsList = [...additionsList].map((file) => {\n      if (file.size > 5 * 1024 * 1024) {\n        flag = true\n      }\n\n      return {\n        name: file.name,\n        path: window.URL.createObjectURL(file),\n        file,\n      }\n    })\n\n    if (flag) {\n      if (callbackError) {\n        callbackError('Слишком большой файл')\n      }\n      return false\n    }\n\n    if (attachments) {\n      additionsList = [...attachments.list, ...additionsList]\n    }\n\n    if (attachments && attachments.type !== 'image') {\n      if (callbackError) {\n        callbackError('Вы уже добавили другой тип файлов')\n      }\n      return false\n    }\n\n    if (additionsList.length > 10) {\n      additionsList = additionsList.slice(0, 10)\n    }\n\n    callbackSuccess(additionsList)\n\n    return false\n  }\n\n  if (attachments) {\n    attachmentsBoxStyles = {\n      height: '100px',\n    }\n\n    list = attachments.list.map((addition, i) => (\n      <Attachment\n        // eslint-disable-next-line react/no-array-index-key\n        key={i}\n        remove={removeFile.bind(null, i)}\n        type={attachments.type}\n        addition={addition}\n      />\n    ))\n  }\n\n  function getMyPosition(callbackSuccess, callbackError = null) {\n    if ('geolocation' in navigator) {\n      const geoOptions = {\n        enableHighAccuracy: true,\n        maximumAge: 30000,\n        timeout: 27000,\n      }\n\n      navigator.geolocation.getCurrentPosition(callbackSuccess, console.log, geoOptions)\n    } else if (callbackError) {\n      callbackError('Permisition denied')\n    }\n  }\n\n  return (\n    <div className={styles.container}>\n      <div className={styles.formInput}>\n        <div className={styles.dropOut} style={dropOutStyle}>\n          <div className={styles.dropOutContainer}>\n            <div\n              onClick={() => {\n                img.current.click()\n              }}\n              className={`${styles.attachItem} ${styles.attachImage}`}\n            >\n              <input\n                onChange={(event) => {\n                  imageUploader(event, (attachmentsList) => {\n                    setAttachments({\n                      type: 'image',\n                      list: attachmentsList,\n                    })\n                  })\n                }}\n                ref={img}\n                type=\"file\"\n                multiple\n                style={{ display: 'none' }}\n              />\n            </div>\n            <div\n              onClick={() => {\n                getMyPosition((position) => {\n                  const { latitude, longitude } = position.coords\n                  const response = `https://yandex.ru/maps/?ll=${longitude}%2C${latitude}&z=15`\n                  setAttachments({\n                    type: 'geolocation',\n                    list: [\n                      {\n                        name: 'Geolocation',\n                        path: response,\n                        latitude,\n                        longitude,\n                      },\n                    ],\n                  })\n                })\n              }}\n              className={`${styles.attachItem} ${styles.attachGeo}`}\n            />\n          </div>\n        </div>\n        <div\n          onClick={() => {\n            !dropOutStyle &&\n              setDropOutStyle({\n                width: '120px',\n              })\n            dropOutStyle && setDropOutStyle(null)\n          }}\n          className={styles.attachButton}\n        />\n        <input\n          onChange={(event) => {\n            if (event.target.value.length > 0) {\n              setSendButtonType('send')\n            } else if (event.target.value.length === 0) {\n              setSendButtonType('mic')\n            }\n          }}\n          onKeyPress={onKeyPress}\n          ref={input}\n          placeholder=\"Enter message...\"\n        />\n        <SendButton submit={onSubmit} type={sendButtonType} />\n      </div>\n      <div style={attachmentsBoxStyles} className={styles.additionsBox}>\n        <ul className={styles.additionsBoxUl}>{list}</ul>\n      </div>\n    </div>\n  )\n}\n\nfunction Attachment(props) {\n  const { remove, type, addition } = props\n\n  const addStyle = {\n    backgroundRepeat: 'no-repeat',\n    backgroundSize: 'cover',\n    backgroundPosition: 'center center',\n    height: '65px',\n  }\n\n  switch (type) {\n    case 'image':\n      addStyle.backgroundImage = `url(${addition.path})`\n      break\n    case 'geolocation':\n      addStyle.backgroundImage = 'url(https://image.flaticon.com/icons/svg/854/854878.svg)'\n      break\n    default:\n      break\n  }\n\n  return (\n    <li>\n      <div onClick={remove} className={styles.remove}>\n        -\n      </div>\n      <div style={addStyle} className={styles.image} />\n      <span className={styles.imageName}>{addition.name}</span>\n    </li>\n  )\n}\n\nfunction SendButton(props) {\n  const { submit, type } = props\n\n  let content = null\n\n  switch (type) {\n    case 'mic':\n      content = <div className={`${styles.inputButton} ${styles.micButton}`} />\n      break\n    case 'send':\n      content = (\n        <div onClick={submit} className={`${styles.sendButton}`}>\n          Send\n        </div>\n      )\n      break\n    default:\n      break\n  }\n  return content\n}\n","import React from 'react'\nimport styles from '../styles/MessageItem.module.css'\n\nexport function MessageItem(props) {\n  const { content, time } = props.inner\n  const formattedTime = new Date(time)\n  let isAttached = false\n  const attachmentsToRender = []\n  if ('attachments' in props.inner) {\n    const { attachments } = props.inner\n    isAttached = true\n    attachments.list.forEach((attachment) => {\n      const attachmentItem = <Attachment type={attachments.type} attachment={attachment} />\n      attachmentsToRender.push(attachmentItem)\n    })\n  }\n  return (\n    <div className={styles.messageWrap}>\n      <div className={styles.messageItem}>\n        <div className={styles.inner}>\n          <div className={styles.message}>{content}</div>\n          <div className={styles.attachments}>{isAttached && attachmentsToRender}</div>\n        </div>\n        <div className={styles.timestamp}>\n          {formattedTime.toLocaleString('ru', {\n            hour: 'numeric',\n            minute: 'numeric',\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction Attachment(props) {\n  const { name, path } = props.attachment\n  const { type } = props\n  let content = null\n\n  switch (type) {\n    case 'geolocation':\n      const { latitude, longitude } = props.attachment\n      const staticMap = `https://static-maps.yandex.ru/1.x/?ll=${longitude},${latitude}&spn=0.016457,0.00619&l=map&size=300,300`\n      const addStyle = {\n        backgroundRepeat: 'no-repeat',\n        backgroundSize: 'cover',\n        backgroundPosition: 'center center',\n        height: '300px',\n        width: '300px',\n      }\n      addStyle.backgroundImage = `url(${staticMap})`\n      content = (\n        <div>\n          <a href={path} target=\"_blank\" rel=\"noopener noreferrer\">\n            <div style={addStyle} className={`${styles.attachment}`} />\n          </a>\n        </div>\n      )\n      break\n    case 'image':\n      content = <img alt={name} src={path} className={styles.image} />\n      break\n    default:\n      break\n  }\n\n  return content\n}\n","import React from 'react'\nimport styles from '../styles/MessageForm.module.css'\nimport { ChatHeader } from './Header'\nimport { FormInput } from './FormInput'\nimport { MessageItem } from './MessageItem'\nimport MyContext from './MyContext.Context'\n\nexport function MessageForm(props) {\n  const { messages, details, style } = props\n  const [dragActive, setDragActive] = React.useState(false)\n  const [dragFiles, setDragFiles] = React.useState(null)\n\n  const dragOver = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n    setDragActive(true)\n  }\n\n  const dragLeave = () => {\n    setDragActive(false)\n  }\n\n  const drop = (event) => {\n    event.preventDefault()\n    event.stopPropagation()\n    setDragActive(false)\n    setDragFiles(event.dataTransfer.files[0])\n  }\n\n  if (details === null) {\n    return ''\n  }\n  const messagesToRender = []\n  messages.forEach((element) => {\n    const messageItem = <MessageItem inner={element} />\n    messagesToRender.push(messageItem)\n  })\n  return (\n    <div onDrop={drop} onDragOver={dragOver} onDragLeave={dragLeave} style={style} className={styles.messageForm}>\n      <div className={`${styles.dragNDropArea} ${dragActive && styles.activeZone}`}>\n        <div className={styles.dragNDropImage} />\n      </div>\n      <MyContext.Consumer>\n        {(value) => <ChatHeader details={details} clickBack={value.closeDialogue.bind(value, 'MessageForm')} />}\n      </MyContext.Consumer>\n      <div className={styles.chat}>\n        <div className={styles.messagesList}>{messagesToRender}</div>\n      </div>\n\n      <div className={styles.inputForm}>\n        <MyContext.Consumer>\n          {(value) => (\n            <FormInput messageHandler={value.messageHandler.bind(value)} dragFiles={[dragFiles, setDragFiles]} />\n          )}\n        </MyContext.Consumer>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Link } from 'react-router-dom'\nimport styles from '../styles/Profile.module.css'\n\nexport function Profile(props) {\n  const { style } = props\n  return (\n    <div className={styles.wrapper} style={style}>\n      <div className={styles.headerContainer}>\n        <div className={styles.header}>\n          <Link to=\"/\" style={{ textDecoration: 'none', color: 'unset' }}>\n            <button className={styles.backButton}>Back</button>\n          </Link>\n          <button className={styles.submitButton}>Edit Profile</button>\n        </div>\n      </div>\n      <div className={styles.profile}>\n        <img\n          className={styles.avatar}\n          src=\"https://im0-tub-ru.yandex.net/i?id=251924006823dd06b0ce06d758f3e6e2&n=13\"\n          alt=\"avatar\"\n        />\n        <div className={styles.formContainer}>\n          <div className={styles.formLabel}>Full name</div>\n          <input className={styles.inputForm} placeholder=\"Avdeev Dmitry\" />\n        </div>\n        <div className={styles.formContainer}>\n          <div className={styles.formLabel}>Username</div>\n          <input className={styles.inputForm} placeholder=\"Dimka1111\" />\n        </div>\n        <div className={styles.formContainer}>\n          <div className={styles.formLabel}>Status</div>\n          <input className={styles.inputForm} placeholder=\"No status\" />\n        </div>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { DialogueForm } from './DialogueForm'\nimport { MessageForm } from './MessageForm'\nimport { Profile } from './Profile'\nimport MyContext from './MyContext.Context'\nimport styles from '../styles/MainForm.module.css'\n\nexport class MainForm extends React.Component {\n  constructor(props) {\n    super(props)\n    const storage = this.parseStorage()\n    this.state = {\n      chats: storage.chats,\n      messages: storage.messages,\n      chatCounter: storage.chatCounter,\n      currentDialogue: null,\n      flag: 0,\n      frameStyles: {\n        MessageForm: { animationName: styles.chatDisappear, display: 'none' },\n        Profile: { animationName: styles.chatDisappear, display: 'none' },\n      },\n    }\n  }\n\n  parseStorage() {\n    const storage = {\n      chats: JSON.parse(localStorage.getItem('chats')),\n      messages: JSON.parse(localStorage.getItem('messages')),\n      chatCounter: JSON.parse(localStorage.getItem('chatCounter')),\n    }\n    if (!storage.chats) {\n      storage.chats = []\n      storage.messages = {}\n      storage.chatCounter = 0\n    }\n    return storage\n  }\n\n  openDialogue(chatId) {\n    const { state } = this\n    state.frameStyles.MessageForm = {\n      animationName: styles.chatAppearance,\n      display: 'flex',\n    }\n    state.currentDialogue = chatId\n    if (state !== this.state) {\n      this.setState(state)\n    }\n  }\n\n  closeDialogue(frame = null) {\n    const { state } = this\n    if (!frame) {\n      Object.keys(state.frameStyles).forEach((index) => {\n        state.frameStyles[index] = {\n          animationName: styles.chatDisappear,\n          display: 'flex',\n        }\n      })\n    } else {\n      state.frameStyles[frame] = {\n        animationName: styles.chatDisappear,\n      }\n    }\n    if (state !== this.state) {\n      this.setState(state)\n    }\n  }\n\n  messageHandler(value, chatTimestamp = null, chatId = null, attachments = null) {\n    let { currentDialogue, messages } = this.state\n    // eslint-disable-next-line no-unused-vars\n    let isAttached = false\n    if (!messages) {\n      messages = {}\n    }\n    if (chatId) {\n      currentDialogue = chatId\n      messages[currentDialogue - 1] = []\n    }\n\n    const message = {\n      id: 'test',\n      content: value,\n      amISender: true,\n      time: chatTimestamp || new Date(),\n      status: 'sent',\n    }\n    if (attachments) {\n      message.attachments = attachments\n      isAttached = true\n\n      const data = new FormData()\n      data.append(Attr.type, attachments.file)\n\n      fetch('https://tt-front.now.sh/upload', {\n        method: 'POST',\n        body: data,\n      })\n        .then(() => {\n          // pass\n          // eslint-disable-next-line no-console\n        })\n        .catch(console.log)\n    }\n    messages[currentDialogue - 1].push(message)\n    this.setState(messages)\n    if (!chatId) {\n      this.setLastMessage()\n    }\n    localStorage.setItem('messages', JSON.stringify(messages))\n  }\n\n  createHandler() {\n    let { chats, chatCounter } = this.state\n    const name = prompt('Enter person name')\n    const text = prompt('Write a message')\n    chatCounter += 1\n    this.messageHandler(text, new Date(), chatCounter)\n    const chatMsgs = this.state.messages[chatCounter - 1]\n    chats.push({\n      id: chatCounter,\n      title: name,\n      is_group: false,\n      host: 'Avdeev Dmitry',\n      lastMessage: chatMsgs[chatMsgs.length - 1],\n    })\n    this.setState({ chats, chatCounter })\n    this.setLastMessage(chatCounter)\n    localStorage.setItem('chats', JSON.stringify(chats))\n    localStorage.setItem('chatCounter', JSON.stringify(chatCounter))\n  }\n\n  setLastMessage(chatId = null) {\n    const { messages, chats } = this.state\n    let { currentDialogue } = this.state\n    if (chatId) {\n      currentDialogue = chatId\n    }\n    const chatMessages = messages[currentDialogue - 1]\n    chats[currentDialogue - 1].lastMessage = chatMessages[chatMessages.length - 1]\n    this.setState(chats)\n    localStorage.setItem('chats', JSON.stringify(chats))\n  }\n\n  openProfile() {\n    const { state } = this\n    state.frameStyles.Profile = {\n      animationName: styles.chatAppearance,\n      display: 'flex',\n    }\n    if (state !== this.state) {\n      this.setState(state)\n    }\n  }\n\n  pageRouter() {\n    const path = this.props.location.pathname\n    switch (true) {\n      case /chat\\/\\d\\/?$/.test(path):\n        const chatid = parseInt(path.match(/\\d+/), 10)\n        this.openDialogue(chatid)\n        break\n      case /profile\\/\\d\\/?$/.test(path):\n        this.openProfile()\n        break\n      case this.state.flag === 0:\n        // eslint-disable-next-line react/no-direct-mutation-state\n        this.state.flag = 1\n        break\n      default:\n        this.closeDialogue()\n        break\n    }\n  }\n\n  render() {\n    this.pageRouter()\n    const { state } = this\n    return (\n      <MyContext.Provider value={this}>\n        <div className={styles.container}>\n          <DialogueForm chats={state.chats} />\n          <MessageForm\n            style={state.frameStyles.MessageForm}\n            details={state.currentDialogue && state.chats[state.currentDialogue - 1]}\n            messages={state.currentDialogue && state.messages[state.currentDialogue - 1]}\n          />\n          <Profile style={state.frameStyles.Profile} />\n        </div>\n      </MyContext.Provider>\n    )\n  }\n}\n","import React from 'react'\nimport { render } from 'react-dom'\nimport './styles/globalStyles.css'\nimport { BrowserRouter, Route } from 'react-router-dom'\nimport * as serviceWorker from './utils/serviceWorker'\nimport { MainForm } from './components/MainForm'\nimport './index.css'\n\nrender(\n  <BrowserRouter>\n    <Route path=\"/\" component={MainForm} />\n  </BrowserRouter>,\n  document.getElementById('root'),\n)\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}